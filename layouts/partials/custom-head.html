{{/* Enhanced Nightfall Theme - Custom Assets Loader */}}
{{/* Loads optional custom styling, retro mode, and interactive features */}}

{{/* External resources with SRI integrity for security */}}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400&display=swap" rel="stylesheet" integrity="sha384-k4Oj6C2w6+oGTr5CaFOF8C8DbE8bfD0oJsI5a2UwKv6D1pJLa2hUtKsVpAiFUgTK" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer">

{{ $customCSS := resources.Get "scss/custom.scss" }}
{{ $retroCSS := resources.Get "scss/retro-mode.scss" }}
{{ $navigationJS := resources.Get "js/navigation.js" }}
{{ $konamiJS := resources.Get "js/konami.js" }}

{{/* Custom styling enhancements (avatar, social icons, hover effects) */}}
{{ if $customCSS }}
  {{ $customCSS = $customCSS | toCSS | minify | fingerprint }}
  <link rel="stylesheet" href="{{ $customCSS.RelPermalink }}" integrity="{{ $customCSS.Data.Integrity }}">
  
  {{/* Dynamic theme color injection based on params.styles.color */}}
  <style>
    :root {
      --theme-color: {{ if eq .Site.Params.styles.color "blue" }}#80AADD{{ else if eq .Site.Params.styles.color "orange" }}#FFB300{{ else if eq .Site.Params.styles.color "green" }}#33D17A{{ else if eq .Site.Params.styles.color "red" }}#F26E74{{ else }}{{ .Site.Params.styles.color }}{{ end }};
      --theme-color-dark: {{ if eq .Site.Params.styles.color "blue" }}#3366AA{{ else if eq .Site.Params.styles.color "orange" }}#AA7700{{ else if eq .Site.Params.styles.color "green" }}#226644{{ else if eq .Site.Params.styles.color "red" }}#AA3344{{ else }}{{ .Site.Params.styles.color }}{{ end }};
    }
  </style>
{{ end }}

{{/* Retro terminal mode styling for Konami code */}}
{{ if $retroCSS }}
  {{ $retroCSS = $retroCSS | toCSS | minify | fingerprint }}
  <link rel="stylesheet" href="{{ $retroCSS.RelPermalink }}" integrity="{{ $retroCSS.Data.Integrity }}">
{{ end }}

{{/* Navigation enhancements (current page highlighting) */}}
{{ if $navigationJS }}
  {{ $navigationJS = $navigationJS | js.Build | minify | fingerprint }}
  <script src="{{ $navigationJS.RelPermalink }}" integrity="{{ $navigationJS.Data.Integrity }}"></script>
{{ end }}

{{/* Konami code easter egg (↑↑↓↓←→←→BA for retro terminal mode) */}}
{{ if $konamiJS }}
  {{ $konamiJS = $konamiJS | js.Build | minify | fingerprint }}
  <script src="{{ $konamiJS.RelPermalink }}" integrity="{{ $konamiJS.Data.Integrity }}"></script>
{{ end }}